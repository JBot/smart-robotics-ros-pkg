<?xml version="1.0"?>

<launch>
  <master auto="start"/>

  <!-- Static transform from world to the map of the GROS robot -->
  <node pkg="tf" type="static_transform_publisher" name="world2gros_broadcaster" args="0 0 0 0 0 0 /world /gros_map 100"/>

  <!-- Map server for GROS robot -->
  <node pkg="map_server" type="map_server" respawn="false" name="GROS_map_server" output="screen" args="$(find eurobot2014_models)/map2014.yaml">
        <param name="frame_id" type="str" value="/gros_map" />
        <remap from="/map" to="/GROS/map" />
  </node>

  <!-- Laser driver => Neato XV11-->
  <node pkg="xv_11_laser_driver" type="neato_laser_publisher" respawn="false" name="GROS_neato_laser" output="screen">
    <param name="firmware_version" value="2" />
    <param name="port" type="str" value="/dev/ttyUSB0" />
    <param name="frame_id" type="str" value="gros_neato_link" />

    <remap from="/scan" to="/GROS/neato" />
  </node>


  <!-- Path planner / Costmap -->
  <node pkg="common_smart_nav" type="pathplanner" respawn="false" name="GROS_pathplanner" output="screen">

    <param name="costmap_name" type="str" value="GROS_costmap" />
    <param name="planner_name" type="str" value="GROS_planner" />
    <param name="map_name" type="str" value="gros_map" />

    <rosparam file="$(find eurobot2014_gros_nav)/launch/nav_params.yaml" command="load" />

        <remap from="/ROBOT/goal" to="/GROS/goal" />
        <remap from="/ROBOT/plan" to="/GROS/plan" />
        <remap from="/ROBOT/path_done" to="/GROS/path_done" />
        <remap from="/ROBOT/compute_path" to="/GROS/compute_path" />
        <remap from="/ROBOT/pause" to="/GROS/pause" />
        <remap from="/ROBOT/resume" to="/GROS/resume" />

        <remap from="/ROBOT/get_robot_pose" to="/GROS/get_robot_pose" />
        <remap from="/ROBOT/get_distance" to="/GROS/get_distance" />
        <remap from="/ROBOT/get_path" to="/GROS/get_path" />

        <remap from="/map" to="/GROS/map" />
  </node>

  <!-- Path wrapper = Path follower -->
  <node pkg="common_smart_nav" type="pathwrapper" respawn="false" name="GROS_pathwrapper" output="screen">
        <param name="map_name" type="str" value="gros_map" />
        <param name="base_name" type="str" value="base_link" />

        <remap from="/ROBOT/plan" to="/GROS/plan" />
        <remap from="/ROBOT/get_robot_pose" to="/GROS/get_robot_pose" />
        <remap from="/cmd_vel" to="/GROS/cmd_vel" />

  </node>

  <!-- Low level motor driver => Arduino -->



</launch>
